%パッケージの使用宣言（includeやimportみないなもの）
\usepackage[top=35truemm,bottom=30truemm,left=30truemm,right=30truemm]{geometry}
\usepackage{fancyhdr}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage[dvipdfmx]{graphicx}
\usepackage[format=hang]{caption}
\usepackage{listings, jlisting}

%見出し表示調整
\titleformat{\section}[hang]{\huge \gtfamily}{\Huge \gtfamily \thesection}{1zh}{\Huge}[{\titlerule[2pt]}]
\titleformat{\subsection}[hang]{\Large \gtfamily}{\Large \gtfamily \thesubsection}{1zh}{\Large}[]

%キャプションの表示指定
\captionsetup[figure]{format=plain, labelformat=simple, labelsep=quad, font=large}
\captionsetup[table]{format=plain, labelformat=simple, labelsep=quad, font=large}
\captionsetup[lstlisting]{format=plain, labelformat=simple, labelsep=quad, font=large}

%tocloftパッケージを使用すると「第n章」とタイトルの「hogehoge」か被るので注意
\renewcommand{\presectionname}{第}
\renewcommand{\postsectionname}{章}

\makeatletter

%行数指定マクロ
\def\linesparpage#1{
    \baselineskip=\textheight
    \divide\baselineskip by #1
}

%refコマンドだけでは「図n hogehoge」と表示してくれないので
%\figref{label}
\newcommand{\figref}[1]{図\ref{#1}}
\newcommand{\tabref}[1]{表\ref{#1}}

\renewcommand{\figurename}{図}
\renewcommand{\tablename}{表}

%図表示用マクロ
%\fig{source path}{caption}{label}
\newcommand{\fig}[4][width=\textwidth]{
    \begin{figure}[!h]
    \begin{center}
    \includegraphics[#1]{#2}
    \caption{#3}
    \label{#4}
    \end{center}
    \end{figure}
}

%リスト表示用設定
\renewcommand{\lstlistingname}{リスト}
\newcommand{\lstref}[1]{リスト\ref{#1}}
\lstset{
    %language=, （言語を指定しない場合（対応していない言語を含む））
    language=C, %例：C言語を指定
    basicstyle=\normalsize,
    commentstyle=\textit,
    classoffset=1,
    keywordstyle=\bfseries,
    frame=tRBl,
    framesep=5pt,
    showstringspaces=false,
    numbers=left,
    stepnumber=1,
    numberstyle=\large
}

\makeatother